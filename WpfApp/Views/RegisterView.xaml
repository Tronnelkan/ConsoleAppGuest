<!-- WpfApp/Views/RegisterView.xaml -->
<Window x:Class="WpfApp.Views.RegisterView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:helpers="clr-namespace:WpfApp.Helpers"
        Title="Register" Height="800" Width="500">
    <Window.Resources>
        <!-- Стиль для отображения ошибок в TextBox -->
        <Style TargetType="TextBox">
            <Setter Property="Validation.ErrorTemplate">
                <Setter.Value>
                    <ControlTemplate>
                        <DockPanel LastChildFill="True">
                            <TextBlock Text="{Binding [0].ErrorContent}" Foreground="Red" Margin="0,0,0,5"/>
                            <AdornedElementPlaceholder/>
                        </DockPanel>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Стиль для отображения ошибок в PasswordBox -->
        <Style TargetType="PasswordBox">
            <Setter Property="Validation.ErrorTemplate">
                <Setter.Value>
                    <ControlTemplate>
                        <DockPanel LastChildFill="True">
                            <TextBlock Text="{Binding [0].ErrorContent}" Foreground="Red" Margin="0,0,0,5"/>
                            <AdornedElementPlaceholder/>
                        </DockPanel>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Grid>
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="20">
                <TextBlock Text="Register" FontSize="24" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,10"/>

                <!-- Username -->
                <StackPanel Orientation="Vertical" Margin="0,5">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Username:" Width="150" VerticalAlignment="Center"/>
                        <TextBox Width="250"
                                 Text="{Binding Username, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                 Tag="Username"/>
                    </StackPanel>
                    <TextBlock Text="{Binding (Validation.Errors)[0].ErrorContent, RelativeSource={RelativeSource Mode=PreviousData}}"
                               Foreground="Red" FontSize="12"/>
                </StackPanel>

                <!-- Email -->
                <StackPanel Orientation="Vertical" Margin="0,5">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Email:" Width="150" VerticalAlignment="Center"/>
                        <TextBox Width="250"
                                 Text="{Binding Email, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                 Tag="Email"/>
                    </StackPanel>
                    <TextBlock Text="{Binding (Validation.Errors)[0].ErrorContent, RelativeSource={RelativeSource Mode=PreviousData}}"
                               Foreground="Red" FontSize="12"/>
                </StackPanel>

                <!-- First Name -->
                <StackPanel Orientation="Vertical" Margin="0,5">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="First Name:" Width="150" VerticalAlignment="Center"/>
                        <TextBox Width="250"
                                 Text="{Binding FirstName, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                 Tag="FirstName"/>
                    </StackPanel>
                    <TextBlock Text="{Binding (Validation.Errors)[0].ErrorContent, RelativeSource={RelativeSource Mode=PreviousData}}"
                               Foreground="Red" FontSize="12"/>
                </StackPanel>

                <!-- Last Name -->
                <StackPanel Orientation="Vertical" Margin="0,5">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Last Name:" Width="150" VerticalAlignment="Center"/>
                        <TextBox Width="250"
                                 Text="{Binding LastName, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                 Tag="LastName"/>
                    </StackPanel>
                    <TextBlock Text="{Binding (Validation.Errors)[0].ErrorContent, RelativeSource={RelativeSource Mode=PreviousData}}"
                               Foreground="Red" FontSize="12"/>
                </StackPanel>

                <!-- Gender -->
                <StackPanel Orientation="Vertical" Margin="0,5">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Gender:" Width="150" VerticalAlignment="Center"/>
                        <ComboBox Width="250"
                                  ItemsSource="{Binding Genders}"
                                  SelectedItem="{Binding Gender, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                  Tag="Gender"/>
                    </StackPanel>
                    <TextBlock Text="{Binding (Validation.Errors)[0].ErrorContent, RelativeSource={RelativeSource Mode=PreviousData}}"
                               Foreground="Red" FontSize="12"/>
                </StackPanel>

                <!-- Phone -->
                <StackPanel Orientation="Vertical" Margin="0,5">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Phone:" Width="150" VerticalAlignment="Center"/>
                        <TextBox Width="250"
                                 Text="{Binding Phone, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                 Tag="Phone"/>
                    </StackPanel>
                    <TextBlock Text="{Binding (Validation.Errors)[0].ErrorContent, RelativeSource={RelativeSource Mode=PreviousData}}"
                               Foreground="Red" FontSize="12"/>
                </StackPanel>

                <!-- Bank Card Data -->
                <StackPanel Orientation="Vertical" Margin="0,5">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Bank Card Data:" Width="150" VerticalAlignment="Center"/>
                        <TextBox Width="250"
                                 Text="{Binding BankCardData, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                 Tag="BankCardData"/>
                    </StackPanel>
                    <TextBlock Text="{Binding (Validation.Errors)[0].ErrorContent, RelativeSource={RelativeSource Mode=PreviousData}}"
                               Foreground="Red" FontSize="12"/>
                </StackPanel>

                <!-- Password -->
                <StackPanel Orientation="Vertical" Margin="0,5">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Password:" Width="150" VerticalAlignment="Center"/>
                        <PasswordBox Width="250"
                                     helpers:PasswordBoxBindingBehavior.BindPassword="True"
                                     helpers:PasswordBoxBindingBehavior.BoundPassword="{Binding Password, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                     Tag="Password"/>
                    </StackPanel>
                    <TextBlock Text="{Binding (Validation.Errors)[0].ErrorContent, RelativeSource={RelativeSource Mode=PreviousData}}"
                               Foreground="Red" FontSize="12"/>
                </StackPanel>

                <!-- Confirm Password -->
                <StackPanel Orientation="Vertical" Margin="0,5">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Confirm Password:" Width="150" VerticalAlignment="Center"/>
                        <PasswordBox Width="250"
                                     helpers:PasswordBoxBindingBehavior.BindPassword="True"
                                     helpers:PasswordBoxBindingBehavior.BoundPassword="{Binding ConfirmPassword, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                     Tag="ConfirmPassword"/>
                    </StackPanel>
                    <TextBlock Text="{Binding (Validation.Errors)[0].ErrorContent, RelativeSource={RelativeSource Mode=PreviousData}}"
                               Foreground="Red" FontSize="12"/>
                </StackPanel>

                <!-- Recovery Keyword -->
                <StackPanel Orientation="Vertical" Margin="0,5">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Recovery Keyword:" Width="150" VerticalAlignment="Center"/>
                        <TextBox Width="250"
                                 Text="{Binding RecoveryKeyword, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                 Tag="RecoveryKeyword"/>
                    </StackPanel>
                    <TextBlock Text="{Binding (Validation.Errors)[0].ErrorContent, RelativeSource={RelativeSource Mode=PreviousData}}"
                               Foreground="Red" FontSize="12"/>
                </StackPanel>

                <!-- Roles -->
                <StackPanel Orientation="Vertical" Margin="0,5">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Role:" Width="150" VerticalAlignment="Center"/>
                        <ComboBox Width="250"
                                  ItemsSource="{Binding Roles}"
                                  DisplayMemberPath="Name"
                                  SelectedItem="{Binding SelectedRole, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                  Tag="Role"/>
                    </StackPanel>
                    <TextBlock Text="{Binding (Validation.Errors)[0].ErrorContent, RelativeSource={RelativeSource Mode=PreviousData}}"
                               Foreground="Red" FontSize="12"/>
                </StackPanel>

                <!-- Addresses -->
                <StackPanel Orientation="Vertical" Margin="0,5">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Address:" Width="150" VerticalAlignment="Center"/>
                        <ComboBox Width="250"
                                  ItemsSource="{Binding Addresses}"
                                  DisplayMemberPath="FullAddress"
                                  SelectedItem="{Binding SelectedAddress, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                  Tag="Address"/>
                        <Button Content="Add" Width="50" Margin="5,0,0,0" Command="{Binding AddAddressCommand}"/>
                    </StackPanel>
                    <TextBlock Text="{Binding (Validation.Errors)[0].ErrorContent, RelativeSource={RelativeSource Mode=PreviousData}}"
                               Foreground="Red" FontSize="12"/>
                </StackPanel>

                <!-- Register Button -->
                <Button Content="Register" Command="{Binding RegisterCommand}" Width="150" Height="30" Margin="0,20,0,0" HorizontalAlignment="Center"/>

                <!-- Error Message -->
                <TextBlock Text="{Binding ErrorMessage}" Foreground="Red" TextAlignment="Center" Margin="0,5"/>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Window>
